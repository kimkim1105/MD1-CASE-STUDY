<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Snake Game</title>
    <script src="Snake.js"></script>
    <script src="Food.js"></script>
</head>
<body>
<div id="score">

</div>
<canvas id="myCanvas" height="300" width="300" style="background-color: black"></canvas>
</body>
</html>
<script>
    let cnt = 0;
    let canvas = document.getElementById("myCanvas");
    let ctx = canvas.getContext("2d")
    console.log(canvas)
    let grid = 20;

    let snake = new Snake(100, 100, grid, 0, 0, []);

    let food = new Food()
    setInterval(setup, 300)

    addEventListener("keydown", ((evt) => {
        const direction = evt.key.replace("Arrow", "");
        snake.change(direction);
    }))
    food.appear()

    function setup() {
        clear()
        snake.update()
        // console.log("snake", snake)
        snake.drawSnake()
        food.drawFood()
        snake.change()
        if (snake.eatFood(food)) {
            console.log("eating")
            food.appear();
        }
        document.getElementById("score").innerHTML = ("Score: " +cnt)
        gameOver();
    }

    function clear() {
        ctx.clearRect(0, 0, canvas.width, canvas.height)
    }
    function gameOver(){
        if(snake.checkEnd()){
            alert("game over");
            snake = new Snake(100, 100, grid, 0, 0, []);
            food = new Food();
            food.appear();
            cnt = 0;
            setup()
        }
    }
</script>